# un-official strict mode
set -euo pipefail

wp db create

wp db export [filename]
wp db import [filename]

wp core install --url=www.example.com --title=stuff --admin_user=admin --admin_password=password --admin_email=john@example.com
wp plugin install wp-super-cache
wp plugin install wp-maintenance-mode
wp plugin install google-analytics-for-wordpress
wp plugin install --activate wordfence

wp core check-update
wp core update
wp plugin status

wp option set close_comments_for_old_posts 1
wp option set permalink_structure "/%postname%/"
wp option set start_of_week 0
wp option set gmtoffset


wp cron event list --fields=hook,recurrence | grep "1 day" | cut -f 1 | xargs wp cron event run
wp cron event list --fields=hook,recurrence | grep "1 hour" | cut -f 1 | xargs wp cron event run
wp cron event list --fields=hook,recurrence | grep "12 hours" | cut -f 1 | xargs wp cron event run

runuser -u www-data -- wp cron event list --fields=hook,recurrence | grep "1 day" | cut -f 1 | xargs runuser -u www-data -- wp cron event run > /dev/stdout 2>&1
